# OIF Solver Configuration - Generated by setup_testnet.sh
# Origin Chain ID: 11155420
# Destination Chain ID: 84532

include = ["testnet/networks.toml", "testnet/api.toml", "testnet/gas.toml"]

[solver]
id = "oif-solver-testnet"
monitoring_timeout_minutes = 5
min_profitability_pct = 1.0

# ============================================================================
# STORAGE
# ============================================================================
[storage]
primary = "file"
cleanup_interval_seconds = 3600

[storage.implementations.memory]
# Memory storage has no configuration

[storage.implementations.file]
storage_path = "./data/storage"
ttl_orders = 0
ttl_intents = 86400
ttl_order_by_tx_hash = 86400

# ============================================================================
# ACCOUNT
# ============================================================================
[account]
primary = "local"

[account.implementations.local]
private_key = "${SOLVER_PRIVATE_KEY}"

# ============================================================================
# DELIVERY
# ============================================================================
[delivery]
min_confirmations = 3
transaction_poll_interval_seconds = 3 # How often to check transaction status

[delivery.implementations.evm_alloy]
network_ids = [11155420, 84532]

# ============================================================================
# DISCOVERY
# ============================================================================
[discovery]

[discovery.implementations.onchain_eip7683]
network_ids = [11155420, 84532]
polling_interval_secs = 5

[discovery.implementations.offchain_eip7683]
api_host = "127.0.0.1"
api_port = 8081
network_ids = [11155420, 84532]

# ============================================================================
# ORDER
# ============================================================================
[order]

[order.implementations.eip7683]

[order.strategy]
primary = "simple"

[order.strategy.implementations.simple]
max_gas_price_gwei = 100

# ============================================================================
# PRICING
# ============================================================================
[pricing]
primary = "coingecko"

[pricing.implementations.coingecko]
cache_duration_seconds = 60
rate_limit_delay_ms = 1200

# ============================================================================
# SETTLEMENT
# ============================================================================
[settlement]
settlement_poll_interval_seconds = 10 # How often to check can_claim

[settlement.domain]
chain_id = 11155420
address = "0xF859d69A86CEdFFe1F88d4bFcC24Ffaa0E050e46"

[settlement.implementations.direct]
order = "eipXXXX"
network_ids = [11155420, 84532]
dispute_period_seconds = 60
oracle_selection_strategy = "First"

[settlement.implementations.direct.oracles]
input = { 11155420 = [
    "0x048B199f0e9bf17709F86Ac1f62ad7C246f86346",
], 84532 = [
    "0x6df0Bc4eE21286BCb83576Cb546100EDE196A54e",
] }
output = { 11155420 = [
    "0x048B199f0e9bf17709F86Ac1f62ad7C246f86346",
], 84532 = [
    "0x6df0Bc4eE21286BCb83576Cb546100EDE196A54e",
] }

[settlement.implementations.direct.routes]
# Bidirectional routes - both chains can send to each other
11155420 = [84532]
84532 = [11155420]

# ============================================================================
# HYPERLANE SETTLEMENT
# ============================================================================
[settlement.implementations.hyperlane]
order = "eip7683"
network_ids = [11155420, 84532]
default_gas_limit = 500000
message_timeout_seconds = 600
finalization_required = true

[settlement.implementations.hyperlane.oracles]
input = { 11155420 = [
    "0xc8604e4aBC757C5C1990BAe679A7b219808EDc9c",
], 84532 = [
    "0xf79350C014e8669f2CE1dB928977a4f8E744f42B",
] }
output = { 11155420 = [
    "0xc8604e4aBC757C5C1990BAe679A7b219808EDc9c",
], 84532 = [
    "0xf79350C014e8669f2CE1dB928977a4f8E744f42B",
] }

[settlement.implementations.hyperlane.routes]
# Bidirectional routes - both chains can send to each other
11155420 = [84532]
84532 = [11155420]

[settlement.implementations.hyperlane.mailboxes]
11155420 = "0x6966b0E55883d49BFB24539356a2f8A673E02039"
84532 = "0x6966b0E55883d49BFB24539356a2f8A673E02039"

[settlement.implementations.hyperlane.igp_addresses]
11155420 = "0x28B02B97a850872C4D33C3E024fab6499ad96564"
84532 = "0x28B02B97a850872C4D33C3E024fab6499ad96564"
