# OIF Solver Configuration
# Supported networks: [10, 8453, 42161]


include = ["mainnet/networks.toml", "mainnet/api.toml", "mainnet/gas.toml"]

[solver]
id = "oif-solver-mainnet"
min_profitability_pct = 1.0
monitoring_timeout_seconds = 28800

# ============================================================================
# STORAGE
# ============================================================================
[storage]
primary = "file"
cleanup_interval_seconds = 3600

[storage.implementations.memory]
# Memory storage has no configuration

[storage.implementations.file]
storage_path = "./data/storage"
ttl_orders = 0
ttl_intents = 86400
ttl_order_by_tx_hash = 86400

# ============================================================================
# ACCOUNT
# ============================================================================
[account]
primary = "local"

[account.implementations.local]
private_key = "${SOLVER_PRIVATE_KEY}"

# ============================================================================
# DELIVERY
# ============================================================================
[delivery]
min_confirmations = 3

[delivery.implementations.evm_alloy]
network_ids = [10, 8453, 42161]

# ============================================================================
# DISCOVERY
# ============================================================================
[discovery]

[discovery.implementations.onchain_eip7683]
network_ids = [10, 8453, 42161]
polling_interval_secs = 5

[discovery.implementations.offchain_eip7683]
api_host = "127.0.0.1"
api_port = 8081
network_ids = [10, 8453, 42161]

# ============================================================================
# ORDER
# ============================================================================
[order]

[order.implementations.eip7683]

[order.strategy]
primary = "simple"

[order.strategy.implementations.simple]
max_gas_price_gwei = 100

# ============================================================================
# PRICING
# ============================================================================
[pricing]
primary = "coingecko"

[pricing.implementations.coingecko]
cache_duration_seconds = 60
rate_limit_delay_ms = 1200

# ============================================================================
# SETTLEMENT
# ============================================================================
[settlement]
settlement_poll_interval_seconds = 10 # How often to check can_claim

# ============================================================================
# HYPERLANE SETTLEMENT
# ============================================================================
[settlement.implementations.hyperlane]
order = "eip7683"
network_ids = [10, 8453, 42161]
default_gas_limit = 300000
message_timeout_seconds = 600
finalization_required = true

[settlement.implementations.hyperlane.oracles]
input = { 10 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
], 8453 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
], 42161 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
] }
output = { 10 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
], 42161 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
], 8453 = [
    "0x0b88D54A39F330Dd7e773af4806BDC490c79cAB6",
] }

[settlement.implementations.hyperlane.routes]
# Bidirectional routes - both chains can send to each other
10 = [8453, 42161]
8453 = [10, 42161]
42161 = [10, 8453]

[settlement.implementations.hyperlane.mailboxes]
10 = "0xd4C1905BB1D26BC93DAC913e13CaCC278CdCC80D"
8453 = "0xeA87ae93Fa0019a82A727bfd3eBd1cFCa8f64f1D"
42161 = "0x979Ca5202784112f4738403dBec5D0F3B9daabB9"

[settlement.implementations.hyperlane.igp_addresses]
10 = "0xD8A76C4D91fCbB7Cc8eA795DFDF870E48368995C"
8453 = "0xc3F23848Ed2e04C0c6d41bd7804fa8f89F940B94"
42161 = "0x3b6044acd6767f017e99318AA6Ef93b7B06A5a22"
